### 基础知识

* 提供了多个平台的SDK，包括小程序，提供了云通信服务器+后台管理，通过SDK+云通信+后台，快速搭建IM系统（也很复杂的没有很快）
* 开发者再集成自己的后台，来做用户管理、信息管理、等等
* 云IM的好处是多路复用，穿透网关策略，传输协议优化，通道加密，通信加密等
* 提供单聊，多聊（各种多聊），还能发送表情、图片、地理位置（你能想到的都有）

**应用场景** 选用音频直播间
**功能介绍**
**账号系统**

### 登录鉴权

* 一般来讲，需要使用--用户名（Identifier）和密码（UserSig）
* Identifier 由后台决定，可以用 userId，用 userName，甚至 wechat appId 都可以
* UserSig：用户登录云通信 IM 时使用的密码
* UserSig 是后台使用 Identifier + 其他信息再使用非对称加密生成的。云IM持有你的应用的公钥
* 通过公钥可以解密签名，以此来判断是真由服务器发起的

### 登录鉴权：登录流程

* 小程序--用户正常登录--获取 Identifier(userId/username) + 其他用户信息
* 用户--加入聊天室--使用 Identifier 向后台发起请求--后台使用 PrivateKey + sdkAppid + 其他生成 userSig 返回给小程序
* 用户--使用 Identifier + UserSig 登录云IM
* 所以，其实这整个过程，后台是不怎么参与的，后台只需要将用户信息加密一下，然后返回一个 UserSig 就可以了
* 小程序根据 UserSig 跟云IM进行交互，云IM根据 UserSig 解一下，就知道你这个后台，是否有开通服务的
* **注意**
* 云通信 IM 后台完全信赖 UserSig，为避免数据和业务受影响，请务必确保私钥的安全；
*  云通信 IM 后台 SDK 默认接口生成的 UserSig 有效期为 180 天，可以使用含有有效期参数的接口自行设定有效期
* 开发者需要在 UserSig 过期前到开发者后台获取新的 UserSig

#### 日常业务中，云IM回调给后台

* 如上所述，后台的参与性在日常的业务中比较少，不过还有有的，就是回调
* 回调是由云IM主动发起给后台的，后台接到信息之后，再对信息进行处理
* 目前，回调给后台的有：用户在线状态、资料相关链、单聊信息、群组信息


```js

```

```html

```

```wxss```

